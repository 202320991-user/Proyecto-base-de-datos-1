@page
@model NorthwindWeb.Pages.Customers.IndexModel
@{
    ViewData["Title"] = "Clientes";
}

<h2>Listado de Clientes (Northwind)</h2>

<form method="get" class="mb-3">
    <div class="input-group">
        <input type="text" name="search" value="@Model.Search" 
            class="form-control" 
            placeholder="Buscar por ID, Compañía, Contacto o País..." />
        
        <button type="submit" class="btn btn-primary">Buscar</button>
    </div>
</form>

<div class="table-responsive">
    <table class="table table-striped table-bordered align-middle">
        <thead class="table-dark">
            <tr>
                <th>ID</th>
                <th>Compañía</th>
                <th>Contacto</th>
                <th>País</th>
                <th>Acción</th> 
            </tr>
        </thead>
        <tbody>
            @foreach (var c in Model.Clientes)
            {
                <tr>
                    <td>@c.CustomerID</td>
                    <td>@c.CompanyName</td>
                    <td>@c.ContactName</td>
                    <td>@c.Country</td>
                    
                    <td>
                        <a asp-page="/Reports/HistorialCliente" 
                           asp-route-CustomerID="@c.CustomerID" 
                           class="btn btn-sm btn-info text-white">
                            Ver Historial
                        </a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

<div class="d-flex justify-content-center align-items-center mt-3 gap-2">

    @if (Model.PageNumber > 1)
    {
        <a class="btn btn-primary btn-sm" 
           style="min-width: 100px;"
           asp-page="./Index" 
           asp-route-pageNumber="@(Model.PageNumber - 1)" 
           asp-route-search="@Model.Search">
            ← Anterior
        </a>
    }

    @if (Model.TotalPages > 0)
    {
        <span class="px-2 fw-bold">Página @Model.PageNumber de @Model.TotalPages</span>
    }

    @if (Model.PageNumber < Model.TotalPages)
    {
        <a class="btn btn-primary btn-sm" 
           style="min-width: 100px;"
           asp-page="./Index" 
           asp-route-pageNumber="@(Model.PageNumber + 1)" 
           asp-route-search="@Model.Search">
            Siguiente →
        </a>
    }
</div>